<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>UPDATE INTERNSHIP CERTIFICATE</title>
	<link rel="stylesheet" href="" th:href="@{/Certificate/Update_Certificate.css}" />
</head>

<body>
	<div class="color">
		<div class="container">
			<a class="back" href="/certificate/details">Back</a>

			<div class="certificateForm">
				<h1>Update Internship Certificate</h1>

				<form action="/certificates/update" method="post" enctype="multipart/form-data" id="certificateForm">
					<input type="hidden" name="id" th:value="${certificate.id}" />

					<label for="studentName">Student Name:</label>
					<input type="text" id="studentName" name="studentName" th:value="${certificate.studentName}"
						required><br>

					<label for="courseName">Course Name:</label>
					<input type="text" id="courseName" name="courseName" th:value="${certificate.courseName}"
						required><br>

					<label for="issueDate">Issue Date:</label>
					<input type="date" id="issueDate" name="issueDate" th:value="${certificate.issueDate}" required><br>

					<label for="issuedBy">Issued By:</label>
					<input type="text" id="issuedBy" name="issuedBy" th:value="${certificate.issuedBy}" required><br>

					<label for="studentId">Student ID:</label>
					<input type="text" id="studentId" name="studentId" th:value="${certificate.student.id}"
						required><br>

					<input type="hidden" id="certificateData" name="certificateData" />
					<button type="button" onclick="generateCertificate()">Generate Certificate</button>
				</form>
			</div>

			<div class="certificatePreview">
				<h2>Certificate Preview:</h2>
				<div id="certificatePreview" class="certificate-preview">

					<div class="certificate-header">
						<h3 style="color: blue;">VETRI TECHNOLOGY SOLUTIONS</h3>
						<div style="font-size: 18px;">CERTIFICATE</div>
						<div style="font-size: 14px;">O F I N T E R N S H I P</div>
						<div style="font-size: 12px;">THIS CERTIFICATE IS PROUDLY PRESENTED TO</div>
					</div>

					<div class="certificate-body" id="certificateBody">
						<div style="font-size: larger; color: midnightblue;">
							<span id="certStudentName1" th:text="${certificate.studentName}">[Intern
								Name]</span><br>______________________________________
						</div>
						We are happy to certify that <span id="certStudentName2"
							th:text="${certificate.studentName}">[Intern Name]</span> has completed their internship<br>
						as a <span id="certCourseName" th:text="${certificate.courseName}">[Internship Program]</span>
						from Date: <span id="certIssueDate" th:text="${certificate.issueDate}">[Date]</span><br>
						We appreciate their work and contributions.<br>
					</div>

					<div class="certificate-footer">
						<div>
							<div>Sincerely Yours</div>
							<div><span id="certIssuedBy1" th:text="${certificate.issuedBy}">[Issuer]</span></div>
							<div style="font-size: larger; font-weight: bold;">PRAVIN KUMAR P</div>
							<div style="font-size: medium;">Founder & CEO</div>
						</div>
						<div>
							<div>Sincerely Yours</div>
							<div><span id="certIssuedBy2" th:text="${certificate.issuedBy}">[Issuer]</span></div>
							<div style="font-size: larger; font-weight: bold;">PUNITHA V</div>
							<div style="font-size: medium;">General Manager</div>
						</div>
					</div>

				</div>
			</div>

			<script>
				function generateCertificate() {
					const studentName = document.getElementById('studentName').value;
					const courseName = document.getElementById('courseName').value;
					const issueDate = document.getElementById('issueDate').value;
					const issuedBy = document.getElementById('issuedBy').value;

					document.getElementById('certStudentName1').textContent = studentName;
					document.getElementById('certStudentName2').textContent = studentName;
					document.getElementById('certCourseName').textContent = courseName;
					document.getElementById('certIssueDate').textContent = issueDate;
					document.getElementById('certIssuedBy1').textContent = issuedBy;
					document.getElementById('certIssuedBy2').textContent = issuedBy;

					html2canvas(document.getElementById('certificatePreview')).then(canvas => {
						const imageData = canvas.toDataURL('image/png');
						document.getElementById('certificateData').value = imageData;

						document.getElementById('certificateForm').submit();
					});
				}
			</script>

			<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
		</div>
	</div>
</body>

</html>